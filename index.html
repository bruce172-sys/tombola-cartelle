<!doctype html>
<html lang="it"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Tombola – Cartelle</title>
<style>
:root{--bg:#0b1220;--card:#111a2e;--txt:#e7eefc;--muted:#94a3b8;--ok:#22c55e;--border:#1f2a44;}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto;background:var(--bg);color:var(--txt)}
header{padding:14px 16px;display:flex;gap:10px;align-items:center;justify-content:space-between}
.badge{font-weight:800;font-size:18px}
.btn{background:transparent;color:var(--txt);border:1px solid var(--border);border-radius:12px;padding:10px 12px;font-size:14px}
.wrap{padding:0 14px 16px}
.grid{display:grid;grid-template-columns:repeat(5,1fr);gap:10px}
.cell{
  background:var(--card);border:1px solid var(--border);border-radius:14px;
  min-height:64px;padding:10px;display:flex;align-items:center;justify-content:center;
  text-align:center;font-size:16px;font-weight:700;user-select:none;-webkit-tap-highlight-color:transparent;
}
.marked{outline:3px solid var(--ok)}
.small{font-size:12px;color:var(--muted);padding:0 16px 14px}
input,button{font-size:20px;padding:12px 14px;border-radius:12px}
input{width:100%;border:1px solid #334155;background:#0f172a;color:var(--txt)}
button.primary{width:100%;border:0;background:#2563eb;color:white}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:14px}
.hint{color:var(--muted);font-size:13px}
.err{color:#fca5a5;font-weight:700}
/* Responsive: su schermi piccoli usa 3 colonne (più leggibile) */
@media (max-width: 420px){
  .grid{grid-template-columns:repeat(3,1fr);gap:10px}
  .cell{min-height:74px;font-size:18px;padding:10px}
  header{padding:12px 14px}
}
/* Testo che si adatta */
.cell{font-size:clamp(14px, 3.8vw, 18px)}

</style>
</head><body>
<header><div class="badge">Tombola – Cartelle</div></header>
<div class="wrap">
  <div class="card">
    <div class="hint">Inserisci il tuo PIN (es. <b>3ZWE</b>)</div>
    <input id="code" placeholder="PIN (es. 3ZWE)" autocomplete="off" />
    <div style="height:10px"></div>
    <button class="primary" onclick="go()">Apri cartella</button>
    <div id="msg" class="hint" style="margin-top:10px"></div>
  </div>
</div>

<script>
async function go(){
  let c = (document.getElementById("code").value || "").toUpperCase().trim().replace(/\s+/g,"");
  const msg = document.getElementById("msg");
  msg.textContent = "";
  msg.className = "hint";
  if(!c){ msg.textContent="Inserisci un PIN."; msg.className="err"; return; }

  try {
    const res = await fetch("codes.json", {cache:"no-store"});
    const map = await res.json();
    const url = map[c];
    if(!url){ msg.textContent="PIN non valido."; msg.className="err"; return; }
    window.location.href = url;
  } catch(e) {
    msg.textContent = "Errore caricamento. Riprova.";
    msg.className="err";
  }
}
document.getElementById("code").addEventListener("keydown", e=>{ if(e.key==="Enter") go(); });
</script>
</body></html>
